"use strict";(self.webpackChunkdocs_react_plot=self.webpackChunkdocs_react_plot||[]).push([[299],{1898:function(e,t,n){n.r(t),n.d(t,{assets:function(){return w},contentTitle:function(){return E},default:function(){return k},frontMatter:function(){return y},metadata:function(){return v},toc:function(){return A}});var r=n(7462),o=n(3366),a=n(7294),i=n(3905),s=n(2842),l=n(2074),u=n(5378),m=n(5111);function c(e,t={}){let{rescale:n=!1,uniqueX:r=!1,xColumn:o=0,yColumn:a=1,bestGuess:i=!1,keepInfo:l,numberColumns:c=Number.MAX_SAFE_INTEGER,maxNumberColumns:f=Number.MAX_SAFE_INTEGER,minNumberColumns:p=2}=t;if(void 0!==l)throw new Error("keepInfo has been deprecated, pelase use the new method parseXYAndKeepInfo");e=(0,u.Z)(e),f=Math.max(f,o+1,a+1),p=Math.max(o+1,a+1,p);let d=e.split(/[\r\n]+/),h=[],x=[],g=0;if(d.forEach((e=>{if(e=e.trim(),/[0-9]+/.test(e)&&/^[0-9eE,;. \t+-]+$/.test(e)){let t=e.split(/,[; \t]+|[; \t]+/);1===t.length&&(t=e.split(/[,; \t]+/)),t&&t.length>=p&&t.length<=f&&(h.push(t.map((e=>parseFloat(e.replace(",","."))))),g++)}else e&&x.push({position:g,value:e})})),i){if(h[0]&&3===h[0].length&&void 0===t.xColumn&&void 0===t.yColumn){let e=!0;for(let t=0;t<h.length-1;t++)1!==Math.abs(h[t][0]-h[t+1][0])&&(e=!1);e&&(o=1,a=2)}if(h[0]&&h[0].length>3){const e=[];for(let t of h)for(let n=o;n<t.length;n+=2)e.push(t[n]);(0,s.GZ)(e)&&(c=2)}}if(c){const e=[];for(const t of h)for(let n=0;n<t.length;n+=c)e.push(t.slice(n,n+c));h=e}const b={x:h.map((e=>e[o])),y:h.map((e=>e[a]))};if(r&&function(e={}){const{x:t,y:n}=e;if(t.length<2)return;if(t.length!==n.length)throw new Error("The X and Y arrays mush have the same length");let r=t[0],o=0;for(let a=1;a<t.length;a++)r!==t[a]&&(o++,r=t[a],t[o]=t[a],a!==o&&(n[o]=0)),a!==o&&(n[o]+=n[a]);t.length=o+1,n.length=o+1}(b),n){let e=(0,m.Z)(b.y);for(let t=0;t<b.y.length;t++)b.y[t]/=e}return{info:x,data:b}}var f=n(1736),p=n(1119);function d(){var e=(0,a.useState)([]),t=e[0],n=e[1],r=(0,l.AO)({direction:"horizontal"});return(0,a.useEffect)((function(){fetch("/data/mass-peg1500.txt").then((function(e){e.text().then((function(e){n((0,s.G0)(function(e,t={}){return c(e,t).data}(e)))}))}))}),[]),a.createElement("div",null,a.createElement(l.XN,{width:800,height:300},a.createElement(l.eh,{data:t,xAxis:"x",yAxis:"y"}),a.createElement(l.RD,{id:"x",position:"bottom",label:"m/z",displayPrimaryGridLines:!0}),a.createElement(l.RD,{position:"left",label:"Relative intensity",paddingStart:.03}),a.createElement(l.uN,null,r.annotations)))}var h="import React from 'react';\nimport { xyToXYObject } from 'ml-spectra-processing';\nimport { useEffect, useState } from 'react';\nimport {\n  Annotations,\n  Axis,\n  LineSeries,\n  Plot,\n  PlotController,\n  SeriesPoint,\n  useAxisZoom,\n} from 'react-plot';\nimport { parseXY } from 'xy-parser';\n\nfunction ZoomablePlot() {\n  const [data, setData] = useState<SeriesPoint[]>([]);\n  const zoom = useAxisZoom({ direction: 'horizontal' });\n\n  useEffect(() => {\n    fetch('/data/mass-peg1500.txt').then((response) => {\n      response.text().then((text) => {\n        setData(xyToXYObject(parseXY(text)));\n      });\n    });\n  }, []);\n\n  return (\n    <div>\n      <Plot width={800} height={300}>\n        <LineSeries data={data} xAxis=\"x\" yAxis=\"y\" />\n        <Axis id=\"x\" position=\"bottom\" label=\"m/z\" displayPrimaryGridLines />\n        <Axis position=\"left\" label=\"Relative intensity\" paddingStart={0.03} />\n        <Annotations>{zoom.annotations}</Annotations>\n      </Plot>\n    </div>\n  );\n}\n\nexport default function MassPlot() {\n  return (\n    <PlotController>\n      <ZoomablePlot />\n    </PlotController>\n  );\n}\n",x=function(){return a.createElement(l.aE,null,a.createElement(d,null))};function g(e){var t=(0,a.useState)(!1),n=t[0],r=t[1];return a.createElement(a.Fragment,null,a.createElement("div",{className:"demo-example-wrapper"},a.createElement(x,null),a.createElement("div",{className:"demo-example-buttons"},a.createElement("button",{onClick:function(){return r((function(e){return!e}))},type:"button",style:{backgroundColor:n?"#dbeafe":void 0}},"Code"),e.noCodesandbox?null:a.createElement(p.Z,{name:"mass-plot",source:h,dependencies:{react:"^17.0.2","ml-spectra-processing":"^11.0.0","react-plot":"^0.19.1","xy-parser":"^5.0.2"}},(function(){return a.createElement("button",{type:"submit"},"Open sandbox")})))),n&&a.createElement(f.Z,{className:"language-jsx"},h))}var b=["components"],y={},E="Mass spectrum",v={unversionedId:"experimental/mass",id:"experimental/mass",title:"Mass spectrum",description:"Example of code loading and converting a text file (using xy-parser)",source:"@site/docs/550_experimental/mass.md",sourceDirName:"550_experimental",slug:"/experimental/mass",permalink:"/experimental/mass",editUrl:"https://github.com/zakodium-oss/react-plot-docs/tree/main/docs/550_experimental/mass.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Infrared spectrum",permalink:"/experimental/ir"},next:{title:"NMR spectra",permalink:"/experimental/nmr"}},w={},A=[],C={toc:A};function k(e){var t=e.components,n=(0,o.Z)(e,b);return(0,i.kt)("wrapper",(0,r.Z)({},C,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"mass-spectrum"},"Mass spectrum"),(0,i.kt)("p",null,"Example of code loading and converting a text file (using ",(0,i.kt)("inlineCode",{parentName:"p"},"xy-parser"),")"),(0,i.kt)(g,{mdxType:"MassDemo"}))}k.isMDXComponent=!0},5378:function(e,t,n){function r(e,t={}){if("string"==typeof e)return e;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer){const{encoding:n=o(e)}=t;return new TextDecoder(n).decode(e)}throw new TypeError("blob must be a string, ArrayBuffer or ArrayBufferView")}function o(e){const t=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);if(t.length>=2){if(254===t[0]&&255===t[1])return"utf-16be";if(255===t[0]&&254===t[1])return"utf-16le"}return"utf-8"}n.d(t,{Z:function(){return r}})},5111:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(4091);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.N)(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,o=void 0===n?0:n,a=t.toIndex,i=void 0===a?e.length:a;if(o<0||o>=e.length||!Number.isInteger(o))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=o||i>e.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=e[o],l=o+1;l<i;l++)e[l]>s&&(s=e[l]);return s}}}]);